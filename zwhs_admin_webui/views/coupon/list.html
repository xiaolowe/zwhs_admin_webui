<div class="pageheader" >
  <h1>营销活动</h1>
  <div class="breadcrumb-wrapper hidden-xs">
      <span class="label">你的足迹:</span>
      <ol class="breadcrumb">
          <li><a href="index.html">优惠券管理</a>
          
      </ol>
  </div>
</div>

<section id="main-content" class="animated fadeInRight" ng-controller="coupon" >
    <div class="row">
     <div class="col-md-12">
      <div class="panel panel-default">


        <div class="panel-heading"  ng-show="detail">
            <h3 class="panel-title">优惠券详情</h3>
        </div>
        <div class="panel-body" ng-show="detail"> 
               <button type="button" class="btn btn-sm  btn-info btn-success btn-trans" ng-click="listshow()">返回</button> 
        </div>
          
             <div class="panel-heading"  ng-show="adding">
                <h3 class="panel-title">新建优惠券</h3>
            </div>
            <div class="panel-body" ng-show="adding"> 

               <form name="form" novalidate="novalidate">
                   <div class="coupon-adding-input">
                    <label class="coupon-addlabel">优惠券名称:</label>
                    <div class="controls">
                        <input type="text" class="pub-iput" maxlength="10" ng-model="coupon_name" name="coupon_name"  required maxlength="15">
                       
                        <span ng-messages="form.coupon_name.$error">
                          <span class="chenkerror" ng-message="required">*</span>
                        </span>
                    </div>
                </div>

                <div class="coupon-adding-input">
                    <label class="coupon-addlabel">发放总量:</label>
                    <div class="controls">
                        <div class="input-group"  style="float:left">
                          <input type="number" class="pub-iput" ng-model="coupon_number" name="coupon_number" min="0" maxlength="5" max="99999" required ng-pattern="/^\+?[1-9][0-9]*$/">
                          <div class="input-group-addon">张</div>
                        </div> 
                        <span ng-messages="form.coupon_number.$error">
                          <span class="chenkerror" ng-message="required">*</span>
                          <span  class="chenkerror" ng-message="number">优惠券发放总量必须为数字</span>
                          <span class="chenkerror" ng-message="min">优惠券发放总量不能为负数</span>
                          <span  class="chenkerror" ng-message="max">优惠券发放总量不能超过99999张</span>
                          <span class="chenkerror" ng-message="pattern">优惠券发放总量必须是整数</span>
                        </span>
                    </div>
                </div>



                <div class="coupon-adding-input ">
                    <label class="coupon-addlabel">订单金额:</label>
                    <div class="controls">
                        <input type="number" class="pub-iput"  ng-model="coupon_condition" name="coupon_condition" min="0.01" max="99999" required ng-pattern="/^\d+.?\d{0,2}$/" >元,可使用
                    </div>

                    <span ng-messages="form.coupon_condition.$error">
                      <span class="chenkerror" ng-message="required">*</span>
                      <span class="chenkerror" ng-message="number">订单金额必须为数字</span>
                      <span class="chenkerror" ng-message="min">订单不能小于0.01元</span>
                      <span class="chenkerror" ng-message="max">订单金额过大</span>
                      <span class="chenkerror" ng-message="pattern">订单金额最多只能精确到分</span>
                    </span>


                </div>


                <div class="coupon-adding-input ">
                    <label class="coupon-addlabel">优惠券金额:</label>
                    <div class="controls">
                        <input type="number" class="pub-iput"  ng-model="coupon_money" name="coupon_money" min="0.01" max="99999" required ng-pattern="/^\d+.?\d{0,2}$/" >元,可使用
                    </div>

                    <span ng-messages="form.coupon_money.$error">
                      <span class="chenkerror" ng-message="required">*</span>
                      <span class="chenkerror" ng-message="number">优惠券面值金额必须为数字</span>
                      <span class="chenkerror" ng-message="min">优惠券面值不能小于0.01元</span>
                      <span class="chenkerror" ng-message="max">优惠券面值金额过大</span>
                      <span class="chenkerror" ng-message="pattern">优惠券面值金额最多只能精确到分</span>
                    </span>


                </div>


                <div class="coupon-adding-input ">
                    <label class="coupon-addlabel">每人限领:</label>
                    <div class="controls">
                       <select class="pub-select " ng-model="coupon_limit" >
                           <option  value="1" >1张</option>
                           <option value="2">2张</option>
                           <option value="3">3张</option>
                           <option value="5">5张</option>
                           <option value="10">10张</option>
                           <option value="9999">不限</option>                  
                        </select>
                       
                    </div>
                </div>
                

                <div class="coupon-adding-input">
                    <label class="coupon-addlabel">生效日期:</label>
                    <div class="controls">
                      <input type="text" date-picker="" class="pub-iput " required ng-model="effective_time" name="effective_time" >
                       <span ng-messages="form.effective_time.$error">
                          <span class="chenkerror" ng-message="required">*</span>
                       </span>
                    </div>
                </div>

                <div class="coupon-adding-input">
                    <label class="coupon-addlabel">过期日期:</label>
                    <div class="controls">
                       <input type="text" date-picker="" class="pub-iput" required ng-model="expiration_time" name="expiration_time" >
                    </div>
                      <span ng-messages="form.expiration_time.$error">
                          <span class="chenkerror" ng-message="required">*</span>
                       </span>
                </div>
                
                 <div class="coupon-adding-input ">
                    <label class="coupon-addlabel">使用说明:</label>
                    <div class="controls">
                     <textarea name="coupon_desc" ng-model="coupon_desc" style="border: 1px solid #D7D7D7;
                     border-radius: 3px;width: 320px; margin: 0px; height: 80px;" cols="30" rows="2" placeholder="填写活动的详细说明" required></textarea>
                    </div>

                    <span ng-messages="form.coupon_desc.$error">
                          <span class="chenkerror" ng-message="required">*</span>
                       </span>
                </div>
                </from>
                
                <div style=" margin-left: 135px;    clear: both;">
                   <button type="button" class="btn btn-sm  btn-info coupon-right" ng-click="add()" >创建</button>
                   <button type="button" class="btn btn-sm  btn-info btn-success btn-trans" ng-click="listshow()">返回</button> 
                </div>

        </div>



      
      <div class="panel-heading"  ng-show="list">
            <h3 class="panel-title">优惠券管理</h3>
           
          </div>                     
                 
    <div class="panel-body" ng-show="list">
                <div class="tab-wrapper tab-primary" >
                    <tabset>

                        <tab heading="所有优惠券"  ng-controller="couponlist1" >
                          <div class="table-responsive">
                            <div >
                            <button type="button" class="btn btn-sm  btn-info coupon-right" ng-click="addshow()" >新建优惠券</button>
                              <button class="btn btn-sm btn-primary coupon-left" ng-click='search()'>查询</button><input type="text"   placeholder="输入优惠券名称" ng-model="searchcoupon_name" class="pub-iput coupon-left">
                            </div>
                             <table id="example" class="table table-striped table-bordered coupon-table"cellspacing="0" width="100%" >
                                  <thead>
                                      <tr>
                                          <th >优惠券名称</th>
                                          <th>价值(元)</th>
                                          
                                          <th>领取限制</th>
                                          <th>有效期</th>
                                          <th>领取次数</th>
                                         
                                          <th>操作</th>
                                          
                                      </tr>
                                  </thead>
                           
                                  <tbody>
                                      <tr  ng-repeat="items in rows">
                                          <td class="coupon_td">{{items.couponName}}</td>
                                          <td>{{items.couponMoney}}<br/>
                                            <sapn class="shadow">最低消费:{{items.couponCondition| currency : '￥'}}</span>
                                          </td>
                                          <td >
                                            <span ng-show="items.couponLimit == 9999">不限次数</span>
                                            <span ng-show="items.couponLimit != 9999">一人{{items.couponLimit}}张</span>
                                          </br>
                                             <sapn class="shadow">库存:{{items.couponNumber}}/{{items.couponDesc}}</span>
                                           </td>
                                          <td>
                                           {{items.effectiveTime | date : 'yyyy年MM月dd日 HH:mm'}}至</br>
                                               {{items.expirationTime | date : 'yyyy年MM月dd日 HH:mm'}}
                                            </td>
                                          <td class="coupon_td">{{items.couponAmount}}</td>
                                          
                                          <td class="coupon_td">
                                             <span ng-show="items.couponStatus==20">已失效</span>
                                             <a ng-show="items.couponStatus==10"><span type="button" ng-click="invalid(items.couponId)">使失效</button></a>
                                           </td>
                                      </tr>
                                    
                                      <tr ng-show="rows.length==0">
                                                 <th colspan="6">没有筛选出符合条件的店铺</td>
                                      </tr>
                                  </tbody>
                              </table>
                               <!-- page -->
                                  <div>
                                      <div uib-pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" items-per-page="10" max-size="10" template-url="views/page/pagination.html" boundary-links="true"></div>
                                    </div>
                                <!-- /page -->
                          </div>
                        </tab>
                        

                         <tab heading="未开始"  ng-controller="couponlist2" >
                          <div class="table-responsive">
                            <div >
                            <button type="button" class="btn btn-sm  btn-info coupon-right" ng-click="addshow()" >新建优惠券</button>
                              <button class="btn btn-sm btn-primary coupon-left" ng-click='search()'>查询</button><input type="text"   placeholder="输入优惠券名称" ng-model="searchcoupon_name" class="pub-iput coupon-left">
                            </div>
                             <table id="example" class="table table-striped table-bordered coupon-table"cellspacing="0" width="100%" >
                                  <thead>
                                      <tr>
                                          <th >优惠券名称</th>
                                          <th>价值(元)</th>
                                          
                                          <th>领取限制</th>
                                          <th>有效期</th>
                                          <th>领取次数</th>
                                         
                                          <th>操作</th>
                                          
                                      </tr>
                                  </thead>
                           
                                  <tbody>
                                      <tr  ng-repeat="items in rows">
                                          <td class="coupon_td">{{items.couponName}}</td>
                                          <td>{{items.couponMoney}}<br/>
                                            <sapn class="shadow">最低消费:{{items.couponCondition| currency : '￥'}}</span>
                                          </td>
                                          <td >
                                            <span ng-show="items.couponLimit == 9999">不限次数</span>
                                            <span ng-show="items.couponLimit != 9999">一人{{items.couponLimit}}张</span>
                                          </br>
                                             <sapn class="shadow">库存:{{items.couponNumber}}/{{items.couponDesc}}</span>
                                           </td>
                                          <td>
                                           {{items.effectiveTime | date : 'yyyy年MM月dd日 HH:mm'}}至</br>
                                               {{items.expirationTime | date : 'yyyy年MM月dd日 HH:mm'}}
                                            </td>
                                          <td class="coupon_td">{{items.couponAmount}}</td>
                                          
                                          <td class="coupon_td">
                                             <span ng-show="items.couponStatus==20">已失效</span>
                                             <a ng-show="items.couponStatus==10"><span type="button" ng-click="invalid(items.couponId)">使失效</button></a>
                                           </td>
                                      </tr>
                                    
                                      <tr ng-show="rows.length==0">
                                                 <th colspan="6">没有筛选出符合条件的店铺</td>
                                      </tr>
                                  </tbody>
                              </table>
                               <!-- page -->
                                  <div>
                                      <div uib-pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" items-per-page="10" max-size="10" template-url="views/page/pagination.html" boundary-links="true"></div>
                                    </div>
                                <!-- /page -->
                          </div>
                        </tab>

                         <tab heading="进行中"  ng-controller="couponlist3" >
                          <div class="table-responsive">
                            <div >
                            <button type="button" class="btn btn-sm  btn-info coupon-right" ng-click="addshow()" >新建优惠券</button>
                              <button class="btn btn-sm btn-primary coupon-left" ng-click='search()'>查询</button><input type="text"   placeholder="输入优惠券名称" ng-model="searchcoupon_name" class="pub-iput coupon-left">
                            </div>
                             <table id="example" class="table table-striped table-bordered coupon-table"cellspacing="0" width="100%" >
                                  <thead>
                                      <tr>
                                          <th >优惠券名称</th>
                                          <th>价值(元)</th>
                                          
                                          <th>领取限制</th>
                                          <th>有效期</th>
                                          <th>领取次数</th>
                                         
                                          <th>操作</th>
                                          
                                      </tr>
                                  </thead>
                           
                                  <tbody>
                                      <tr  ng-repeat="items in rows">
                                          <td class="coupon_td">{{items.couponName}}</td>
                                          <td>{{items.couponMoney}}<br/>
                                            <sapn class="shadow">最低消费:{{items.couponCondition| currency : '￥'}}</span>
                                          </td>
                                          <td >
                                            <span ng-show="items.couponLimit == 9999">不限次数</span>
                                            <span ng-show="items.couponLimit != 9999">一人{{items.couponLimit}}张</span>
                                          </br>
                                             <sapn class="shadow">库存:{{items.couponNumber}}/{{items.couponDesc}}</span>
                                           </td>
                                          <td>
                                           {{items.effectiveTime | date : 'yyyy年MM月dd日 HH:mm'}}至</br>
                                               {{items.expirationTime | date : 'yyyy年MM月dd日 HH:mm'}}
                                            </td>
                                          <td class="coupon_td">{{items.couponAmount}}</td>
                                          
                                          <td class="coupon_td">
                                             <span ng-show="items.couponStatus==20">已失效</span>
                                             <a ng-show="items.couponStatus==10"><span type="button" ng-click="invalid(items.couponId)">使失效</button></a>
                                           </td>
                                      </tr>
                                    
                                      <tr ng-show="rows.length==0">
                                                 <th colspan="6">没有筛选出符合条件的店铺</td>
                                      </tr>
                                  </tbody>
                              </table>
                               <!-- page -->
                                  <div>
                                      <div uib-pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" items-per-page="10" max-size="10" template-url="views/page/pagination.html" boundary-links="true"></div>
                                    </div>
                                <!-- /page -->
                          </div>
                        </tab>

                         <tab heading="已结束"  ng-controller="couponlist4" >
                          <div class="table-responsive">
                            <div >
                            <button type="button" class="btn btn-sm  btn-info coupon-right" ng-click="addshow()" >新建优惠券</button>
                              <button class="btn btn-sm btn-primary coupon-left" ng-click='search()'>查询</button><input type="text"   placeholder="输入优惠券名称" ng-model="searchcoupon_name" class="pub-iput coupon-left">
                            </div>
                             <table id="example" class="table table-striped table-bordered coupon-table"cellspacing="0" width="100%" >
                                  <thead>
                                      <tr>
                                          <th >优惠券名称</th>
                                          <th>价值(元)</th>
                                          
                                          <th>领取限制</th>
                                          <th>有效期</th>
                                          <th>领取次数</th>
                                         
                                          <th>操作</th>
                                          
                                      </tr>
                                  </thead>
                           
                                  <tbody>
                                      <tr  ng-repeat="items in rows">
                                          <td class="coupon_td">{{items.couponName}}</td>
                                          <td>{{items.couponMoney}}<br/>
                                            <sapn class="shadow">最低消费:{{items.couponCondition| currency : '￥'}}</span>
                                          </td>
                                          <td >
                                            <span ng-show="items.couponLimit == 9999">不限次数</span>
                                            <span ng-show="items.couponLimit != 9999">一人{{items.couponLimit}}张</span>
                                          </br>
                                             <sapn class="shadow">库存:{{items.couponNumber}}/{{items.couponDesc}}</span>
                                           </td>
                                          <td>
                                           {{items.effectiveTime | date : 'yyyy年MM月dd日 HH:mm'}}至</br>
                                               {{items.expirationTime | date : 'yyyy年MM月dd日 HH:mm'}}
                                            </td>
                                          <td class="coupon_td">{{items.couponAmount}}</td>
                                          
                                          <td class="coupon_td">
                                             <span ng-show="items.couponStatus==20">已失效</span>
                                             <span ng-show="items.couponStatus!=20">已结束</span>
                                           </td>
                                      </tr>
                                    
                                      <tr ng-show="rows.length==0">
                                                 <th colspan="6">没有筛选出符合条件的店铺</td>
                                      </tr>
                                  </tbody>
                              </table>
                               <!-- page -->
                                  <div>
                                      <div uib-pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" items-per-page="10" max-size="10" template-url="views/page/pagination.html" boundary-links="true"></div>
                                    </div>
                                <!-- /page -->
                          </div>
                        </tab>
                   

                    

                   
                    </tabset>
                </div>
          </div>
      

                
                    
                 
             </div>
        </div>
    </div>
</section>


<style>

.coupon-addlabel{
  margin-right: 10px;
  float: left;
  font-weight: 400;
  width: 125px;
  text-align: right;
  line-height: 32px;
}

.input-group{width: 100px;}
.controls{float: left;}
.coupon-adding-input{min-height: 40px}
.coupon-adding-jine{
  min-height:70px

}
.coupon-adding-input input{    width: 160px;}
.coupon-adding-input input{    width: 160px;}
.coupon-adding-input span {    line-height: 33px;}
.coupon_td{vertical-align: middle !important}
.shadow{color:#AEABAB;}
</style>